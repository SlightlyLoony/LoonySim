<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_05) on Sun Oct 18 19:06:40 MDT 2015 -->
<title>Numbers</title>
<meta name="date" content="2015-10-18">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Numbers";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9,"i3":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/cirsim/util/Instances.html" title="class in com.cirsim.util"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/cirsim/util/S.html" title="class in com.cirsim.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/cirsim/util/Numbers.html" target="_top">Frames</a></li>
<li><a href="Numbers.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.cirsim.util</div>
<h2 title="Class Numbers" class="title">Class Numbers</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.cirsim.util.Numbers</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">Numbers</span>
extends java.lang.Object</pre>
<div class="block">Static container class for numbers-related utility functions.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Tom Dilatush  tom@dilatush.com</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/cirsim/util/Numbers.html#Numbers--">Numbers</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/cirsim/util/Numbers.html#addWithZeroDetection-double-double-int-">addWithZeroDetection</a></span>(double&nbsp;_a,
                    double&nbsp;_b,
                    int&nbsp;_epsilon)</code>
<div class="block">Adds the given doubles, returning the sum.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/cirsim/util/Numbers.html#hash-int-int-">hash</a></span>(int&nbsp;_hash,
    int&nbsp;_n)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/cirsim/util/Numbers.html#nearlyEqual-double-double-int-">nearlyEqual</a></span>(double&nbsp;_a,
           double&nbsp;_b,
           int&nbsp;_epsilon)</code>
<div class="block">Compares the two given doubles and returns true if they are equal to within the given epsilon (see explanation below).</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/cirsim/util/Numbers.html#subtractWithZeroDetection-double-double-int-">subtractWithZeroDetection</a></span>(double&nbsp;_a,
                         double&nbsp;_b,
                         int&nbsp;_epsilon)</code>
<div class="block">Subtracts the given doubles, returning the difference.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Numbers--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Numbers</h4>
<pre>public&nbsp;Numbers()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="nearlyEqual-double-double-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nearlyEqual</h4>
<pre>public static&nbsp;boolean&nbsp;nearlyEqual(double&nbsp;_a,
                                  double&nbsp;_b,
                                  int&nbsp;_epsilon)</pre>
<div class="block">Compares the two given doubles and returns true if they are equal to within the given epsilon (see explanation below).  This method should
 <i>never</i> be used to compare the result of a subtraction to zero (see discussion below for the reasons why).  Instead, the method should be
 used to compare the operands <i>before</i> the subtraction.  The preceding caution is a specific example of a more general issue: this method
 will return expected results only when the significands of the given numbers overlap.  In other words, when the difference between their
 binary exponents is less than 53.  This method will also yield quite possibly unexpected results when the given operands are NANs or
 Infinities.
 <p>
 For details on the issues that arise when comparing two floating point numbers,
 see <a href="https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/">this article</a> online.
<p>
 This method provides one way to handle an awkwardness associated with using floating point number representation.  The root cause of the
 challenge is that floating point numbers are usually inexact approximations of the number being represented.  For example, you might quite
 reasonably expect that 1.000001 - 0.000001 would yield a result of 1.0, but in fact it does not.  That's because both operands in that
 calculation are inexact representations of the value shown, and the difference between them is just a tiny bit different than the 1.0 you'd
 expect.  While this tiny error is inconvenient and occasionally ugly from a human perspective, from the software's perspective it can be
 downright disastrous.  To make a simple example, software often wants to check to see if a result is zero.  With operands of type double, it
 is completely unsafe to simply write <code>if( a == 0 )</code> or similar code, as the value of "a" may be really close to zero, within the
 margin of floating point approximation error, and the comparison would fail.
<p>
 The solution implemented here is a sort of "fuzzy" comparison that doesn't look for precise equality, but rather equality within a certain
 range.  That range is not an absolute value, like 0.01 &ndash; such a range would produce very unhappy results with numbers of various sizes.
 For operands in the 10^100 range, that's far too small an error range.  For numbers in the 10^-100 range, that's far too big.  This solution
 provides a relative range, expressed in "ulps" (Units in the Last Place), conventionally called "epsilon".  These units are the LSBs of the
 significand, or mantissa, of the floating point numbers.  The magnitude of that LSBs value scales right along with the exponent of the
 floating point numbers, making it perfectly relative no matter what the operands are.
 <p>
 One might reasonably imagine that instead of comparing for "near equality", one might instead subtract two numbers and test for the result
 being near zero.  It turns out that this method leads to significant errors with large numbers.  Consider this simple case, where one number
 is 1.0E100, and the other number is computed by adding 1.0E97 to itself 1000 times.  One would naturally expect those two numbers to be the
 same, and if you subtract one from the other, you'd get an answer that was close to zero.  Instead, you get 5.2452060090094685E85,
 which is a long way from zero!  Yet in the context of the two operands, it's actually a very close result - the two values differ by just
 27 ulps.  By doing the comparison for equality on the operands <i>before</i> they're subtracted, we can take the exponents of the operands
 into account.  Of course, these operands may have different binary exponents.  So what's the magnitude of an ulp in that case?  It's a mix of
 the two, based on the ratio of how far each operand is from the intervening exponent boundary.  It's really not important to understand
 exactly what that means if you're willing to accept that the result is meaningful nonetheless.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>_a</code> - one number to compare</dd>
<dd><code>_b</code> - the other number to compare</dd>
<dd><code>_epsilon</code> - the number of ulps the two given numbers may differ by and still be considered equal</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the two given numbers are equal to within the given number of ulps</dd>
</dl>
</li>
</ul>
<a name="subtractWithZeroDetection-double-double-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>subtractWithZeroDetection</h4>
<pre>public static&nbsp;double&nbsp;subtractWithZeroDetection(double&nbsp;_a,
                                               double&nbsp;_b,
                                               int&nbsp;_epsilon)</pre>
<div class="block">Subtracts the given doubles, returning the difference.  If the result would be within the given epsilon from zero, then an exactly zero double
 is returned.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>_a</code> - the subtrahend</dd>
<dd><code>_b</code> - the minuend</dd>
<dd><code>_epsilon</code> - the maximum delta between the two values, in ulps, for the result to be converted to zero</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the result of adding the two operands</dd>
</dl>
</li>
</ul>
<a name="addWithZeroDetection-double-double-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addWithZeroDetection</h4>
<pre>public static&nbsp;double&nbsp;addWithZeroDetection(double&nbsp;_a,
                                          double&nbsp;_b,
                                          int&nbsp;_epsilon)</pre>
<div class="block">Adds the given doubles, returning the sum.  If the result would be within the given epsilon from zero, then an exactly zero double
 is returned.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>_a</code> - one addend</dd>
<dd><code>_b</code> - the other addend</dd>
<dd><code>_epsilon</code> - the maximum delta between the two values, in ulps, for the result to be converted to zero</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the result of adding the two operands</dd>
</dl>
</li>
</ul>
<a name="hash-int-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>hash</h4>
<pre>public static&nbsp;int&nbsp;hash(int&nbsp;_hash,
                       int&nbsp;_n)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/cirsim/util/Instances.html" title="class in com.cirsim.util"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/cirsim/util/S.html" title="class in com.cirsim.util"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/cirsim/util/Numbers.html" target="_top">Frames</a></li>
<li><a href="Numbers.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
